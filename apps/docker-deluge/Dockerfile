## This file is automatically generated (based on release.json)
##
## Do not changes any lines here
##
####################################
# All rights reserved.              #
# started from Zero                 #
# Docker owned dockserver           #
# Docker Maintainer dockserver      #
#####################################
#####################################
# THIS DOCKER IS UNDER LICENSE      #
# NO CUSTOMIZING IS ALLOWED         #
# NO REBRANDING IS ALLOWED          #
# NO CODE MIRRORING IS ALLOWED      #
#####################################
# shellcheck disable=SC2086
# shellcheck disable=SC2046
FROM ghcr.io/dockserver/docker-ubuntu-focal:latest

LABEL org.opencontainers.image.source="https://github.com/dockserver/container"

ARG TARGETPLATFORM
ARG BUILDPLATFORM

ARG VERSION="2.1.1-0"
ARG BRANCH="master"
ARG DEBIAN_FRONTEND="noninteractive"

ENV PYTHON_EGG_CACHE="/config/plugins/.python-eggs"

RUN  \
  echo "**** add repositories ****" && \
    apt-get update -yqq && \
    apt-get install -yqq gnupg && \
    apt-key adv --keyserver keyserver.ubuntu.com --recv-keys C5E6A5ED249AD24C && \
  echo "deb http://ppa.launchpad.net/deluge-team/stable/ubuntu focal main" >> /etc/apt/sources.list.d/deluge.list && \
  echo "deb-src http://ppa.launchpad.net/deluge-team/stable/ubuntu focal main" >> /etc/apt/sources.list.d/deluge.list && \
  echo "**** install packages ****" && \
    apt-get install -yqq deluged deluge-console deluge-web python3-future python3-requests p7zip-full unrar unzip && \
  echo "**** cleanup ****" && \
    rm -rf /tmp/* /var/lib/apt/lists/* /var/tmp/*

COPY --chown=abc ./apps/docker-deluge/root/ /

EXPOSE 8112 58846 58946 58946/udp

VOLUME /config
##EOF
